---
  Authenticate.keystone:
    -
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 3
          users_per_tenant: 5

  Authenticate.validate_cinder:
    -
      args:
        repetitions: 2
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 3
          users_per_tenant: 5

  Authenticate.validate_glance:
    -
      args:
        repetitions: 2
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 3
          users_per_tenant: 5

  Authenticate.validate_neutron:
    -
      args:
        repetitions: 2
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 3
          users_per_tenant: 5

  Authenticate.validate_nova:
    -
      args:
        repetitions: 2
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 3
          users_per_tenant: 5

  CinderVolumes.create_and_delete_snapshot:
    -
      args:
          force: false
      runner:
        type: "constant"
        times: 20
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        volumes:
          size: 1

  CinderVolumes.create_and_list_snapshots:
    -
      args:
        force: True
        detailed: True
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        volumes:
          size: 1

  CinderVolumes.create_and_attach_volume:
    -
      args:
          size: 10
          image:
            name: "TestVM"
          flavor:
            name: "m1.tiny"
      runner:
        type: "constant"
        times: 5
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  CinderVolumes.create_and_delete_volume:
    -
      args:
        size: 1
        volume_type: "eqlx"
      runner:
        type: "constant"
        times: 3
        concurrency: 2
      context:
        users:
          tenants: 2
          users_per_tenant: 2
    -
      args:
        size: 1
        volume_type: "rbd"
      runner:
        type: "constant"
        times: 3
        concurrency: 2
      context:
        users:
          tenants: 2
          users_per_tenant: 2

  CinderVolumes.create_and_extend_volume:
    -
      args:
        size: 5
        new_size: 1
      runner:
        type: "constant"
        times: 5
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1
    -
      args:
        size: 1
        new_size: 5
      runner:
        type: "constant"
        times: 5
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  CinderVolumes.create_and_list_volume:
    -
      args:
        size: 1
        detailed: True
      runner:
        type: "constant"
        times: 3
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  CinderVolumes.create_and_upload_volume_to_image:
    -
      args:
        size: 1
        force: false
        container_format: "bare"
        disk_format: "qcow2"
        do_delete: true
      runner:
        type: "constant"
        times: 5
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1
    -
      args:
        size: 1
        force: false
        container_format: "bare"
        disk_format: "raw"
        do_delete: true
      runner:
        type: "constant"
        times: 5
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  CinderVolumes.create_and_delete_volume:
    -
      args:
        size: 1
        volume_type: "eqlx"
        image:
            name: "TestVM"
      runner:
        type: "constant"
        times: 5
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
    -
      args:
        size: 1
        volume_type: "rbd"
        image:
            name: "TestVM"
      runner:
        type: "constant"
        times: 5
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  CinderVolumes.create_from_volume_and_delete_volume:
    -
      args:
        size: 5
      runner:
        type: "constant"
        times: 2
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        volumes:
          size: 1
    -
      args:
        size: 5
      runner:
        type: "constant"
        times: 2
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        volumes:
          size: 5
    -
      args:
        size: 1
      runner:
        type: "constant"
        times: 2
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        volumes:
          size: 5

  CinderVolumes.create_volume:
    -
      args:
        size: 1
        volume_type: "eqlx"
      runner:
        type: "constant"
        times: 5
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
    -
      args:
        size: 1
        volume_type: "rbd"
      runner:
        type: "constant"
        times: 5
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  CinderVolumes.list_volumes:
    -
      args:
        detailed: True
      runner:
        type: "constant"
        times: 50
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        volumes:
          size: 1
          volumes_per_tenant: 2

  GlanceImages.create_and_delete_image:
    -
      args:
        image_location: "http://download.cirros-cloud.net/0.3.1/cirros-0.3.1-x86_64-disk.img"
        container_format: "bare"
        disk_format: "raw"
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  GlanceImages.create_and_list_image:
    -
      args:
        image_location: "/root/images/cirros-0.3.4-x86_64.img"
        container_format: "bare"
        disk_format: "raw"
      runner:
        type: "constant"
        times: 10
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1
    -
      args:
        image_location: "http://download.cirros-cloud.net/0.3.1/cirros-0.3.1-x86_64-disk.img"
        container_format: "bare"
        disk_format: "raw"
      runner:
        type: "constant"
        times: 10
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  GlanceImages.create_image_and_boot_instances:
    -
      args:
        image_location: "http://download.cirros-cloud.net/0.3.1/cirros-0.3.1-x86_64-disk.img"
        container_format: "bare"
        disk_format: "raw"
        flavor:
            name: "m1.tiny"
        number_instances: 2
      runner:
        type: "constant"
        times: 10
        concurrency: 1
      context:
        users:
          tenants: 2
          users_per_tenant: 2

  GlanceImages.list_images:
    -
      runner:
        type: "constant"
        times: 10
        concurrency: 1
      context:
        users:
          tenants: 2
          users_per_tenant: 2
        images:
          image_url: "http://download.cirros-cloud.net/0.3.1/cirros-0.3.1-x86_64-disk.img"
          image_type: "raw"
          image_container: "bare"
          images_per_tenant: 4

  KeystoneBasic.get_entities:
    -
      runner:
        type: "constant"
        times: 100
        concurrency: 10

  KeystoneBasic.create_and_delete_service:
    -
      args:
        name: "Rally_test_service"
        service_type: "Really_test_type"
        description: "test_description"
      runner:
        type: "constant"
        times: 100
        concurrency: 10

  KeystoneBasic.create_and_list_services:
    -
      args:
        name: "Rally_test_service"
        service_type: "Really_test_type"
        description: "test_description"
      runner:
        type: "constant"
        times: 100
        concurrency: 10

  KeystoneBasic.create_and_list_tenants:
    -
      args:
        name_length: 10
      runner:
        type: "constant"
        times: 10
        concurrency: 1

  KeystoneBasic.create_tenant_with_users:
    -
      args:
        name_length: 10
        users_per_tenant: 10
      runner:
        type: "constant"
        times: 10
        concurrency: 10

  KeystoneBasic.create_tenant:
    -
      args:
        name_length: 10
      runner:
        type: "constant"
        times: 100
        concurrency: 10

  KeystoneBasic.create_delete_user:
    -
      args:
        name_length: 10
      runner:
        type: "constant"
        times: 100
        concurrency: 10

  KeystoneBasic.create_and_list_users:
    -
      args:
        name_length: 10
      runner:
        type: "constant"
        times: 100
        concurrency: 10

  KeystoneBasic.create_tenant_with_users:
    -
      args:
        name_length: 10
        users_per_tenant: 10
      runner:
        type: "constant"
        times: 10
        concurrency: 10

  KeystoneBasic.create_user:
    -
      args:
        name_length: 10
      runner:
        type: "constant"
        times: 100
        concurrency: 10

  NovaKeypair.boot_and_delete_server_with_keypair:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
      runner:
        type: "constant"
        times: 5
        concurrency: 2
      context:
        users:
          tenants: 2
          users_per_tenant: 1
        network:
          start_cidr: "100.1.0.0/26"

  NovaKeypair.create_and_delete_keypair:
    -
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2

  NovaKeypair.create_and_list_keypairs:
    -
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2

  NovaSecGroup.boot_and_delete_server_with_secgroups:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        security_group_count: 2
        rules_per_security_group: 10
      runner:
        type: "constant"
        times: 4
        concurrency: 1
      context:
        users:
          tenants: 3
          users_per_tenant: 2
        network:
          start_cidr: "100.1.0.0/26"

  NovaSecGroup.create_and_delete_secgroups:
    -
      args:
        security_group_count: 2
        rules_per_security_group: 10
      runner:
        type: "constant"
        times: 4
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  NovaSecGroup.create_and_list_secgroups:
    -
      args:
        security_group_count: 2
        rules_per_security_group: 0
      runner:
        type: "constant"
        times: 4
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1
    -
      args:
        security_group_count: 2
        rules_per_security_group: 10
      runner:
        type: "constant"
        times: 4
        concurrency: 1
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          nova:
              ram: -1
              instances: 5

  NovaServers.boot_and_delete_server:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        force_delete: false
        min_sleep: 5
        max_sleep: 20
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  NovaServers.boot_and_list_server:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        detailed: True
      runner:
        type: "constant"
        times: 50
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  NovaServers.boot_and_live_migrate_server:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        block_migration: false
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
            tenants: 1
            users_per_tenant: 1

  NovaServers.boot_and_migrate_server:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
            tenants: 1
            users_per_tenant: 1

  NovaServers.boot_and_rebuild_server:
    -
      args:
        flavor:
            name: "m1.small"
        from_image:
            name: "TestVM"
        to_image:
            name: "TestVM"
      runner:
        type: "constant"
        times: 5
        concurrency: 2
      context:
        users:
            tenants: 1
            users_per_tenant: 1
    -
      args:
        flavor:
            name: "m1.tiny"
        from_image:
            name: "TestVM"
        to_image:
            name: "TestVM"
      runner:
        type: "constant"
        times: 5
        concurrency: 2
      context:
        users:
            tenants: 1
            users_per_tenant: 1

  NovaServers.boot_and_bounce_server:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        force_delete: false
        actions:
          -
            hard_reboot: 1
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        force_delete: false
        actions:
          -
            soft_reboot: 1
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        force_delete: false
        actions:
          -
            stop_start: 1
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2

  NovaServers.boot_server_from_volume_and_delete:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        volume_size: 10
        force_delete: false
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  NovaServers.boot_server_from_volume:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        volume_size: 10
        volume_type: "eqlx"
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        volume_size: 10
        volume_type: "rbd"
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  NovaServers.boot_server_attach_created_volume_and_live_migrate:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        size: 10
        block_migration: false
        create_volume_kwargs:
            volume_type: "eqlx"
      runner:
        type: "constant"
        times: 5
        concurrency: 1
      context:
        users:
            tenants: 2
            users_per_tenant: 2
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        size: 10
        block_migration: false
        create_volume_kwargs:
            volume_type: "rbd"
      runner:
        type: "constant"
        times: 5
        concurrency: 1
      context:
        users:
          tenants: 2
          users_per_tenant: 2

  NovaServers.boot_server_from_volume_and_live_migrate:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        block_migration: false
        volume_size: 10
        force_delete: false
        volume_type: "eqlx"
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
            tenants: 1
            users_per_tenant: 1
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        block_migration: false
        volume_size: 10
        force_delete: false
        volume_type: "rbd"
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
            tenants: 1
            users_per_tenant: 1

  NovaServers.snapshot_server:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        force_delete: false
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  NovaServers.boot_server:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
      runner:
        type: "constant"
        times: 20
        concurrency: 1
      context:
        users:
            tenants: 1
            users_per_tenant: 1

  NovaServers.list_servers:
    -
      args:
        detailed: True
      runner:
        type: "constant"
        times: 50
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        servers:
          flavor:
              name: "m1.tiny"
          image:
              name: "TestVM"
          servers_per_tenant: 2

  NovaServers.pause_and_unpause_server:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        force_delete: false
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  NovaServers.resize_server:
    -
      args:
        flavor:
            name: "m1.small"
        image:
            name: "TestVM"
        to_flavor:
            name: "m1.tiny"
        confirm: true
        force_delete: false
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        to_flavor:
            name: "m1.small"
        confirm: true
        force_delete: false
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  NovaServers.suspend_and_resume_server:
    -
      args:
        flavor:
            name: "m1.tiny"
        image:
            name: "TestVM"
        force_delete: false
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1

  NeutronNetworks.create_and_delete_networks:
    -
      args:
        network_create_args: {}
      runner:
        type: "constant"
        times: 20
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1

  NeutronNetworks.create_and_list_networks:
    -
      args:
        network_create_args: {
            name: "coffee_test"
        }
      runner:
        type: "constant"
        times: 20
        concurrency: 2
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1

  NeutronNetworks.create_and_update_networks:
    -
      args:
        network_create_args: {}
        network_update_args:
            admin_state_up: False
            name: "_updated"
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1

  NeutronNetworks.create_and_delete_ports:
    -
      args:
        network_create_args: {}
        port_create_args: {}
        ports_per_network: 10
      runner:
        type: "constant"
        times: 20
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1
            port: -1

  NeutronNetworks.create_and_list_ports:
    -
      args:
        network_create_args: {}
        port_create_args: {}
        ports_per_network: 10
      runner:
        type: "constant"
        times: 20
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1
            port: -1

  NeutronNetworks.create_and_update_ports:
    -
      args:
        network_create_args: {}
        port_create_args: {}
        ports_per_network: 5
        port_update_args:
            admin_state_up: False
            device_id: "dummy_id"
            device_owner: "dummy_owner"
            name: "_port_updated"
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1
            port: -1

  NeutronNetworks.create_and_delete_routers:
    -
      args:
        network_create_args: {}
        subnet_create_args: {}
        subnet_cidr_start: "1.1.0.0/30"
        subnets_per_network: 2
        router_create_args: {}
      runner:
        type: "constant"
        times: 30
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1
            subnet: -1
            router: -1

  NeutronNetworks.create_and_list_routers:
    -
      args:
        network_create_args: {}
        subnet_create_args: {}
        subnet_cidr_start: "1.1.0.0/30"
        subnets_per_network: 2
        router_create_args: {}
      runner:
        type: "constant"
        times: 50
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1
            subnet: -1
            router: -1

  NeutronNetworks.create_and_update_routers:
    -
      args:
        network_create_args: {}
        subnet_create_args: {}
        subnet_cidr_start: "1.1.0.0/30"
        subnets_per_network: 2
        router_create_args: {}
        router_update_args:
            admin_state_up: False
            name: "_router_updated"
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1
            subnet: -1
            router: -1

  NeutronNetworks.create_and_delete_subnets:
    -
      args:
        network_create_args: {}
        subnet_create_args:
        subnet_cidr_start: "1.1.0.0/24"
        subnets_per_network: 2
      runner:
        type: "constant"
        times: 30
        concurrency: 5
      context:
        users:
          tenants: 1
          users_per_tenant: 1
        quotas:
          neutron:
            network: -1
            subnet: -1

  NeutronNetworks.create_and_list_subnets:
    -
      args:
        network_create_args: {}
        subnet_create_args: {}
        subnet_cidr_start: "1.1.0.0/30"
        subnets_per_network: 2
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 2
          users_per_tenant: 2
        quotas:
          neutron:
            network: -1
            subnet: -1

  NeutronNetworks.create_and_update_subnets:
    -
      args:
        network_create_args: {}
        subnet_create_args: {}
        subnet_cidr_start: "1.4.0.0/16"
        subnets_per_network: 2
        subnet_update_args:
            enable_dhcp: False
            name: "_subnet_updated"
      runner:
        type: "constant"
        times: 10
        concurrency: 5
      context:
        users:
          tenants: 5
          users_per_tenant: 2
        quotas:
          neutron:
            network: -1
            subnet: -1

  Quotas.cinder_update_and_delete:
    -
      args:
        max_quota: 1024
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2

  Quotas.cinder_update:
    -
      args:
        max_quota: 1024
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2

  Quotas.neutron_update:
    -
      args:
        max_quota: 1024
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2

  Quotas.nova_update_and_delete:
    -
      args:
        max_quota: 1024
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2

  Quotas.nova_update:
    -
      args:
        max_quota: 1024
      runner:
        type: "constant"
        times: 10
        concurrency: 2
      context:
        users:
          tenants: 3
          users_per_tenant: 2
